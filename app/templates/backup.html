<!DOCTYPE html>
<html lang="hr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Backup</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 18px 22px; max-width: 860px; margin: 0 auto; }
    h1 { margin: 0 0 8px; }
    .muted { color:#666; font-size:13px; }
    .actions { display:flex; gap:10px; align-items:center; flex-wrap:wrap; margin: 10px 0; }
    .btn { border:1px solid #ccc; background:#f7f7f7; padding:8px 12px; cursor:pointer; border-radius:10px; }
    .btn-primary { border:1px solid #222; background:#eaeaea; font-weight:bold; }
    .card { border:1px solid #eee; border-radius:14px; padding:12px; background:#fff; margin-top:12px; }
    input, select { width:100%; padding:10px; border:1px solid #ccc; border-radius:10px; box-sizing:border-box; }
    .ok { background:#eaffea; border:1px solid #86d786; padding:10px 12px; margin:10px 0; border-radius:12px; }
    .err { background:#fff3f3; border:1px solid #e2a1a1; padding:10px 12px; margin:10px 0; border-radius:12px; }
    label { display:block; font-size:13px; margin: 10px 0 6px; color:#444; }
  </style>
</head>
<body>
  <h1>Backup</h1>
  <div class="muted">Prijavljen: {{ user }}</div>

  <div class="actions">
    <a href="/offer"><button class="btn" type="button">Ponuda</button></a>
    <a href="/offers"><button class="btn" type="button">Sve ponude</button></a>
    <a href="/dashboard"><button class="btn" type="button">Dashboard</button></a>
    <a href="/settings"><button class="btn" type="button">Postavke</button></a>
  </div>

  {% if ok %}<div class="ok">{{ ok }}</div>{% endif %}
  {% if err %}<div class="err">{{ err }}</div>{% endif %}

  <div class="card">
    <h3 style="margin:0 0 6px;">Export</h3>
    <div class="muted" style="margin-bottom:10px;">Preuzmi ZIP backup (offers.json + PDF-ovi).</div>
    <a href="/backup/export"><button class="btn btn-primary" type="button">Download backup ZIP</button></a>
  </div>

  <div class="card">
    <h3 style="margin:0 0 6px;">Import / Restore</h3>
    <div class="muted">Učitaj prethodno eksportirani ZIP (ili offers.json). Preporuka: restore kao ARCHIVED da ne miješa aktivne ponude.</div>

    <form method="post" action="/backup/import" enctype="multipart/form-data" style="margin-top:10px;">
      <label>Datoteka (ZIP ili JSON)</label>
      <input type="file" name="file" accept=".zip,.json,application/zip,application/json" required>

      <label style="margin-top:12px;">
        <input type="checkbox" name="restore_as_archived" value="1" checked style="width:auto; margin-right:8px;">
        Restore kao ARCHIVED (sigurnije)
      </label>

      <div style="margin-top:10px;">
        <button class="btn btn-primary" type="submit" onclick="return confirm('Import će dodati ponude u bazu. Nastaviti?');">Import</button>
      </div>
    </form>
  </div>
</body>
</html>

<!DOCTYPE html>
<html lang="hr">
<head>
  <meta charset="UTF-8" />
  <title>Ponuda</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 16px; }
    table { border-collapse: collapse; width: 100%; margin-top: 12px; }
    th, td { border: 1px solid #ccc; padding: 6px; text-align: right; }
    th:first-child, td:first-child { text-align: left; }
    th { background: #f5f5f5; }
    .row { display: grid; grid-template-columns: 1fr 120px 120px 120px 90px; gap: 10px; align-items: end; }
    input { width: 100%; padding: 6px; }
    button { padding: 8px 12px; cursor: pointer; }
    .top { display:flex; justify-content: space-between; align-items: center; }
    .muted { color: #666; font-size: 12px; }
  </style>
</head>
<body>

<div class="top">
  <div>
    <h2>Nova ponuda</h2>
    <div class="muted">Prijavljen: {{ user }}</div>
  </div>
  <form action="/logout" method="post">
    <button type="submit">Odjava</button>
  </form>
</div>

<form action="/offer/add" method="post">
  <div class="row">
    <div>
      <label>Naziv</label>
      <input name="name" placeholder="npr. Ormar po mjeri" required />
    </div>
    <div>
      <label>Količina</label>
      <input name="qty" type="number" step="0.01" value="1" required />
    </div>
    <div>
      <label>Cijena</label>
      <input name="price" type="number" step="0.01" value="0" required />
    </div>
    <div>
      <label>Ukupno</label>
      <input type="text" value="(auto)" disabled />
    </div>
    <div>
      <button type="submit">Dodaj</button>
    </div>
  </div>
</form>

<div style="margin-top:10px; display:flex; gap:10px; align-items:center;">
  <form action="/offer/clear" method="post">
    <button type="submit">Obriši sve stavke</button>
  </form>
  <div><strong>Međuzbroj:</strong> {{ "%.2f"|format(subtotal) }} €</div>
</div>

<table>
  <thead>
    <tr>
      <th>Naziv</th>
      <th>Količina</th>
      <th>Cijena</th>
      <th>Ukupno</th>
    </tr>
  </thead>
  <tbody>
    {% for it in items %}
      <tr>
        <td>{{ it.name }}</td>
        <td>{{ "%.2f"|format(it.qty) }}</td>
        <td>{{ "%.2f"|format(it.price) }}</td>
        <td>{{ "%.2f"|format(it.total) }}</td>
      </tr>
    {% endfor %}
    {% if items|length == 0 %}
      <tr><td colspan="4" style="text-align:left; color:#777;">Nema stavki još.</td></tr>
    {% endif %}
  </tbody>
</table>

</body>
</html>

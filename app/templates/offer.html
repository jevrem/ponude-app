<!DOCTYPE html>
<html lang=\"hr\">
<head>
  <meta charset=\"UTF-8\" />
  <title>Ponuda</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 18px; }
    .top { display:flex; align-items:flex-start; justify-content:space-between; gap:12px; }
    .muted { color:#666; font-size: 13px; margin-top: 4px; }
    .row { display:flex; gap:12px; align-items:flex-end; margin: 12px 0 10px; }
    label { font-size: 13px; display:block; margin-bottom: 4px; }
    input { padding:8px; font-size:14px; }
    .w-name { flex: 1; min-width: 260px; }
    .w-sm { width: 140px; }
    button, .btn {
      padding: 8px 12px; font-size: 14px; cursor: pointer;
      border: 1px solid #999; background: #eee;
    }
    .btn { text-decoration:none; color:#000; display:inline-block; }
    table { border-collapse: collapse; width: 100%; margin-top: 10px; }
    th, td { border: 1px solid #ccc; padding: 8px; }
    th { background: #f5f5f5; text-align: left; }
    td.num, th.num { text-align: right; }
    .actions { display:flex; gap:10px; align-items:center; flex-wrap:wrap; margin-top: 6px; }
    .subtotal { font-weight: 700; }
  </style>
</head>
<body>

<div class=\"top\">
  <div>
    <h1 style=\"margin:0;\">Nova ponuda</h1>
    <div class=\"muted\">Prijavljen: {{ user }}</div>
  </div>
  <form method=\"post\" action=\"/logout\">
    <button type=\"submit\">Odjava</button>
  </form>
</div>

<form method=\"post\" action=\"/offer/add\">
  <div class=\"row\">
    <div class=\"w-name\">
      <label>Naziv</label>
      <input name=\"name\" class=\"w-name\" placeholder=\"npr. Ormar po mjeri\" required />
    </div>
    <div class=\"w-sm\">
      <label>Količina</label>
      <input name=\"qty\" class=\"w-sm\" type=\"number\" step=\"0.01\" value=\"1\" />
    </div>
    <div class=\"w-sm\">
      <label>Cijena</label>
      <input name=\"price\" class=\"w-sm\" type=\"number\" step=\"0.01\" value=\"0\" />
    </div>
    <div>
      <button type=\"submit\">Dodaj</button>
    </div>
  </div>
</form>

<div class=\"actions\">
  <form method=\"post\" action=\"/offer/clear\" style=\"margin:0;\">
    <button type=\"submit\">Obriši sve stavke</button>
  </form>

  <span class=\"subtotal\">Međuzbroj: {{ \"%.2f\"|format(subtotal) }} €</span>

  <a class=\"btn\" href=\"/offer.pdf\">Download PDF</a>
  <a class=\"btn\" href=\"/offer.xlsx\">Download Excel</a>
</div>

<table>
  <thead>
    <tr>
      <th>Naziv</th>
      <th class=\"num\">Količina</th>
      <th class=\"num\">Cijena</th>
      <th class=\"num\">Ukupno</th>
    </tr>
  </thead>
  <tbody>
    {% for it in items %}
      <tr>
        <td>{{ it.name if it.name is defined else it[\"name\"] }}</td>
        <td class=\"num\">{{ \"%.2f\"|format((it.qty if it.qty is defined else it[\"qty\"])|float) }}</td>
        <td class=\"num\">{{ \"%.2f\"|format((it.price if it.price is defined else it[\"price\"])|float) }}</td>
        <td class=\"num\">{{ \"%.2f\"|format((it.line_total if it.line_total is defined else it[\"line_total\"])|float) }}</td>
      </tr>
    {% endfor %}
    {% if not items %}
      <tr><td colspan=\"4\" class=\"muted\">Nema stavki još. Dodaj prvu gore.</td></tr>
    {% endif %}
  </tbody>
</table>

</body>
</html>
